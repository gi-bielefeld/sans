{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "https://gitlab.ub.uni-bielefeld.de/gi/sans/-/raw/master/nextflow_schema.json",
    "title": "Nextflow pipeline parameters",
    "description": "This pipeline uses Nextflow and processes some kind of data. The JSON Schema was built using the nf-core pipeline schema builder.",
    "type": "object",
    "definitions": {
        "input_output": {
            "title": "Input / Output",
            "type": "object",
            "description": "Required input and output arguments",
            "default": "",
            "properties": {
                "input": {
                    "type": "string",
                    "format": "path",
                    "fa_icon": "fas fa-sign-in-alt",
                    "description": "Either: Input directory containing all fasta or fastq files\nOr: zip or tar.gz file containing all fasta or fastq files (no folders)"
                },
                "outdir": {
                    "type": "string",
                    "format": "directory-path",
                    "fa_icon": "fas fa-sign-out-alt",
                    "description": "Output directory where output is written to"
                }
            },
            "required": [
                "input",
                "outdir"
            ]
        },
        "optional_input_arguments": {
            "title": "Optional input arguments",
            "type": "object",
            "description": "Specify input",
            "default": "",
            "properties": {
                "qualify": {
                    "type": "integer",
                    "description": "Discard k-mers with lower abundance than this threshold",
                    "minimum": 2,
                    "maximum": 10,
                    "help_text": "When analyzing read data, a common preprocessing step is to filter out low coverage\nk-mers that typically arise from sequencing errors. SANS ambages includes a new\noption to perform such a filtering step, allowing raw read data to be analyzed without\nthe need to run another tool first. A minimum coverage threshold can be specified,\ni.e., --qualify 2 filters out all k-mers that occur less than 2 times per genome."
                },
                "file_of_files": {
                    "type": "string",
                    "format": "file-path",
                    "description": "Specify input in more detail",
                    "help_text": "For each input genome, you can define an identifyer, specify multiple input files (gzipped or not), and optionally specify a minimum abundance threshold (overwriting the global qualify-value:\n Identifier : File1 ; ... ; FileN ! MinAbundance\n\nExample:\nTaxon1 : assembled_genome.fasta ! 1\nTaxon2 : reads_fw.fastq.gz ; reads_rv.fastq.gz ! 3"
                },
                "amino": {
                    "type": "boolean",
                    "description": "input provides amino acid sequences"
                },
                "code": {
                    "type": "boolean",
                    "description": "input provides coding sequences",
                    "help_text": "Provided coding sequences will be translated to amino acids. Reverse complement k-mers are not considered and the default k-mer length is 10. By default, the standard genetic code will be used for translation. A local installation of SANS (https://github.com/gi-bielefeld/sans) allows to specify different code tables."
                }
            },
            "fa_icon": "fas fa-terminal"
        },
        "further_optional_parameters": {
            "title": "Further optional Parameters",
            "type": "object",
            "description": "Optional Parameters",
            "default": "",
            "properties": {
                "kmer": {
                    "type": "integer",
                    "description": "k-mer length",
                    "help_text": "You may want to try different values for the k-mer length. On shorter or rather heterogeneous sequences, use a smaller k, e.g., -k 15.",
                    "default": 31,
                    "minimum": 9,
                    "maximum": 64
                },
                "label": {
                    "type": "string",
                    "format": "file-path",
                    "description": "Color taxa according to given groups",
                    "help_text": "To depict the phylogeny on a higher level, taxa can be assigned to groups. Each group is then represented by a color and individual text labels of taxa are replaced by colored circles accordingly. Use option --label groups.tsv to provide a mapping of some or all genome identifiers to arbitrary group names. A local installation of SANS (https://github.com/gi-bielefeld/sans) allows to specify custom color assignments to groups."
                },
                "top": {
                    "type": "string",
                    "pattern": "^\\d+[n]?$",
                    "description": "Number of splits in the output list",
                    "help_text": "For large data sets, the list of splits can become very long. We recommend to restrict the output for n genomes as input to the 10n strongest splits in the output using --top 10n. Use an integer (without n) to limit by an absolute value.",
                    "default": "10n"
                },
                "tree": {
                    "type": "boolean",
                    "help_text": "The sorted list of splits is greedily filtered, i.e., splits are iterated from strongest to weakest and a split is kept if and only if the filter criterion is met.\n In a first step, the weakly filter is applied, i.e., a split is kept if it is weakly compatible to all previously filtered splits. If set to true, in a second step the strict filter is applied, i.e., a split is kept if the resulting set of splits is equivalent to a tree.",
                    "description": "Additionally filter the output splits to obtain a tree.",
                    "default": true
                },
                "pdf": {
                    "type": "boolean",
                    "description": "Output network as PDF file with Splitstree 4",
                    "default": true
                }
            }
        }
    },
    "allOf": [
        {
            "$ref": "#/definitions/input_output"
        },
        {
            "$ref": "#/definitions/optional_input_arguments"
        },
        {
            "$ref": "#/definitions/further_optional_parameters"
        }
    ]
}
